<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: ModScraper</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: ModScraper</h1>

    




<section>

<header>
    
        <h2>ModScraper</h2>
        
            <div class="class-description"><p>This class is responsible for making requests and extracting information from
the Warframe Wikia. All its methods are either query or process HTML 
information from that page. As all scrappers, when one day the wikia gets an 
uplift, so must this class.</p>

<p>This class makes usage of Promises for all the methods that make requests, 
so a I advise you to be confident with them.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="ModScraper"><span class="type-signature"></span>new ModScraper<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Innitiazes a ModScraper instance, but doesn't load it. To check if an 
instace is loaded use the isModsTableLoaded() method.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promisedScraper.js.html">promisedScraper.js</a>, <a href="promisedScraper.js.html#line68">line 68</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="getLinks"><span class="type-signature"></span>getLinks<span class="signature">(aTable)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    



<div class="description">
    Extracts a list of mod URLs from the given HTML table. Each URL links to
the wikia page of the mod it refers to.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>aTable</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The individual HTML table with the 
                             information needed.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promisedScraper.js.html">promisedScraper.js</a>, <a href="promisedScraper.js.html#line191">line 191</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>loadModsTable()</li>
        </ul>
    </dd>
    

    
</dl>











<h5>Throws:</h5>

        

    <div class="param-desc">
    
        InstanceNotLoadedException
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    An Array containing the all the URLs of all the mods
                     contained in the given table.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getModInformation"><span class="type-signature"></span>getModInformation<span class="signature">(modURL)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Makes a request to the given mod URL, downloads its information table and
returns an object with the information parsed.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>modURL</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The URL of the wikia page containing the mod 
                             information to parse.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promisedScraper.js.html">promisedScraper.js</a>, <a href="promisedScraper.js.html#line226">line 226</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A Promise containning a JSON object representing the 
                     mod.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="isModsTableLoaded"><span class="type-signature"></span>isModsTableLoaded<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Returns true if the main Mods table on WIKIA_MODS_LINK has been loaded
by the scraper, or false otherwise.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promisedScraper.js.html">promisedScraper.js</a>, <a href="promisedScraper.js.html#line175">line 175</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="global.html#WIKIA_MODS_LINK">WIKIA_MODS_LINK</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    true if the table has been loaded, false 
                     otherwise.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="loadModsTable"><span class="type-signature"></span>loadModsTable<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    <p>Downloads the HTML from the Wikia page, sets up all the mod tables. This
method is mandatory for the methods that required parsed information fom 
mods table and must be run before running them.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promisedScraper.js.html">promisedScraper.js</a>, <a href="promisedScraper.js.html#line139">line 139</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>requestHTML(url)</li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A Promise that the table was correctly loaded. It 
                     only returns after eveything sucessfuly loaded from 
                     the website or throws an error. It is atomic.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
        <p class="code-caption">Loading usage:</p>
    
    <pre class="prettyprint"><code>let scrapy = new ModScraper();

let sucessFn = function(){
 console.log("HTML data loaded with great success!");
};
       
let failFn = function(error){
 console.log("Logging error: " + error);
};
       
scrapy.loadModsTable().then(sucessFn).catch(failFn);</code></pre>



        
            

    

    <h4 class="name" id="requestHTML"><span class="type-signature"></span>requestHTML<span class="signature">(theURL)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Makes a GET request to the given URL to download its HTML content and
returns a Promise of a result

On successfull completion of the request the promise returns the HTML
body of the HTML page. On fail, it returns a string with the error.

This method does not make multiple retries, but if an error occurs it
differentiates between the error types with a best effort basis.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>theURL</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The URL of the page whose
                                             HTML content we want to
                                             download.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promisedScraper.js.html">promisedScraper.js</a>, <a href="promisedScraper.js.html#line287">line 287</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Check if the page changed from last time before making the request.</li>
        </ul>
    </dd>
    
</dl>











<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        PageUnreacheableException   Generic error used when the given
                                     page cannot be reached.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        TimeoutReadException        Error generated when the given wikia
                                     page takes to long to read or write
                                     a response to us. Likely means the
                                     wikia server is overloaded with work.
                                     Genereted via Timeout.
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        TimeoutConnException        Error issued when our server cannot
                                     connect to the wikia server. Likely
                                     means that the wikia server is down,
                                     or that there is a connection issue
                                     on our side. Genereted via Timeout.
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    A Promise object with the body, or
                                     an exception.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ModScraper.html">ModScraper</a></li></ul><h3>Global</h3><ul><li><a href="global.html#HTTP_GET">HTTP_GET</a></li><li><a href="global.html#TIMEOUT_WAIT_TIME">TIMEOUT_WAIT_TIME</a></li><li><a href="global.html#WIKIA_MODS_LINK">WIKIA_MODS_LINK</a></li><li><a href="global.html#WIKIA_PAGE_LINK">WIKIA_PAGE_LINK</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Jan 11 2017 12:45:45 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>